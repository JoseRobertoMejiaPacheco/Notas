{"ops":[{"insert":"Instalar dependencias\nsudo apt install git python3-pip build-essential python3-dev libxslt-dev libzip-dev libldap2-dev libsasl2-dev node-less"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Creamos el usuario y grupo de sistema 'odoo':\nsudo adduser --system --quiet --shell=/bin/bash --home=/opt/odoo --gecos 'odoo' --group odoo"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Creamos en directorio en donde se almacenará el archivo de configuración y log de odoo::\nsudo mkdir /etc/odoo && sudo mkdir /var/log/odoo/"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Agregamos las fuentes de Postgres\nsudo apt-get install wget ca-certificates"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"sudo sh -c 'echo \"deb http://apt.postgresql.org/pub/repos/apt/ `lsb_release -cs`-pgdg main\" >> /etc/apt/sources.list.d/pgdg.list'"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"sudo apt-get update"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"You must change the line of /etc/apt/sources.list.d/pgdg.list to"},{"attributes":{"code-block":true},"insert":"\n\n\n"},{"insert":"deb [arch=amd64] http://apt.postgresql.org/pub/repos/apt/ focal-pgdg main"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"sudo apt-get update -y"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Copy"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"sudo apt-get install -y python-ldap3"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":" Instalamos Postgres y librerías base del sistema:\nsudo apt-get install postgresql-10 postgresql-server-dev-10 -y"},{"attributes":{"code-block":true},"insert":"\n\n\n"},{"insert":"sudo apt-get update && sudo build-essential python3-pil python3-lxml python3-dev python3-pip python3-setuptools npm nodejs git gdebi libldap2-dev libsasl2-dev  libxml2-dev libxslt1-dev libjpeg-dev -y"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Descargamos odoo version 11 desde git:\nsudo git clone --depth 1 --branch 11.0 https://github.com/odoo/odoo /opt/odoo/odoo"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Creamos el usuario odoo en Postgres\nsudo su - postgres -c \"createuser -s odoo\""},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"INSTALL WKHTMLTOPDF\nsudo apt install xfonts-base xfonts-75dpi -y"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Instalar el entorno virtual\nsudo apt-get install python3.7-dev"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"sudo add-apt-repository ppa:deadsnakes/ppa"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"sudo apt install python3.7"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"pip3 install virtualenv"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Ir al directorio\ncd /opt/odoo/odoo/"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Create a new virtual environment for our Odoo installation with:\nvirtualenv odoo11-venv --python=python3.7"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"activate the environment:\nsource odoo11-venv/bin/activate"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Instalar las librerias de python\npip3 install -r /opt/odoo/odoo/requirements.txt"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"sudo ln -s /usr/local/bin/wkhtmltopdf /usr/bin/"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"sudo ln -s /usr/local/bin/wkhtmltoimage /usr/bin/"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"sudo mv /opt/odoo/odoo/debian/odoo.conf /etc/odoo/odoo.conf"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"sudo sed -i \"s,^\\(logfile = \\).*,\\1\"/var/log/odoo/odoo-server.log\",\" /etc/odoo/odoo.conf"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"\n[Unit]"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Description=Odoo11"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Requires=postgresql.service"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"After=network.target postgresql.service"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"[Service]"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Type=simple"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"SyslogIdentifier=odoo"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"PermissionsStartOnly=true"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"User=odoo"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Group=odoo"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"ExecStart=/opt/odoo/odoo11-venv/bin/python3 /opt/odoo/odoo/odoo-bin -c /etc/odoo11.conf"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"StandardOutput=journal+console"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"[Install]"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"WantedBy=multi-user.target"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Ejecutar\n/opt/odoo/odoo/odoo11-venv/bin/python3.7 /opt/odoo/odoo/odoo-bin"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"chmod 777 -R  odoo11-venv/"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"pip3 install -i https://m.devpi.net/jaraco/dev suds-jurko"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"Instalar less en entoeno virtual\nsudo apt install nodeenv"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"curl https://packages.microsoft.com/keys/microsoft.asc | sudo apt-key add -"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"echo \"deb [arch=amd64] https://packages.microsoft.com/ubuntu/18.04/prod bionic main\" | sudo tee /etc/apt/sources.list.d/mssql-release.list"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"sudo apt update"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"sudo apt install msodbcsql17"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"\n"}]}