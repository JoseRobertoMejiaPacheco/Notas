{"ops":[{"insert":"server {"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"  listen 80;"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"   server_name odoo.4gingenieria.com;"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"   client_max_body_size 999999M; #insert here"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"   client_body_buffer_size 200000k;"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"   #root /var/www/example.com;"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"  location / {"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"   proxy_read_timeout 720000s;"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"   proxy_connect_timeout 720000s;"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"   proxy_pass http://127.0.0.1:8069;"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"   proxy_redirect off;"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"   proxy_set_header Host $host;"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"   proxy_set_header X-Real-IP $remote_addr;"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"   proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"   proxy_set_header X-Forwarded-Proto $scheme;"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"  }"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"  location /longpolling {"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"   proxy_pass http://127.0.0.1:8071;"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"        proxy_redirect off;"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"   # set headers"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"   proxy_set_header    Host            $host;"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"   proxy_set_header    X-Real-IP       $remote_addr;"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"   proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"   proxy_set_header    X-Forwarded-Proto https;"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"  }"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"  gzip_types text/css text/less text/plain text/xml application/xml application/json application/javascript;"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"  gzip on;"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"}"},{"attributes":{"code-block":true},"insert":"\n\n\n\n"},{"insert":"https://codepre.com/lets-encrypt-ssl-to-install-odoo-14-on-ubuntu-20-04.html"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"\n\n\n\nc\nnano /etc/nginx/sites-available/proyecto_final.nginx.conf"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"ln -i /etc/nginx/sites-available/proyecto_final.nginx.conf /etc/nginx/sites-enabled/proyecto_final.nginx.conf"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"sudo nano /etc/systemd/system/proyecto_final.service"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"\ns\n[Unit]"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Description=Example .NET Web API App running on Ubuntu"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"[Service]"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"WorkingDirectory=/home/ubuntu/publish/"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"ExecStart=/usr/bin/dotnet /home/ubuntu/publish/FinalProject.ProductsAndServices.Api.dll"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Restart=always"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"# Restart service after 10 seconds if the dotnet service crashes:"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"RestartSec=10"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"KillSignal=SIGINT"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"SyslogIdentifier=dotnet-example"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"User=www-data"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Environment=ASPNETCORE_ENVIRONMENT=Production"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Environment=DOTNET_PRINT_TELEMETRY_MESSAGE=false"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"[Install]"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"WantedBy=multi-user.target"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"dotnet publish"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"dotnet /home/ubuntu/publish/FinalProject.ProductsAndServices.Api.dll"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"\nhttps://faun.pub/ubuntu-servers-and-asp-net-core-project-deployment-using-nginx-d9a3a1f6ac82\n\nsudo systemctl stop proyecto_final.service"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"sudo systemctl enable proyecto_final.service"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"sudo systemctl start proyecto_final.service"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"sudo systemctl status proyecto_final.service"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"sudo journalctl -fu proyecto_final.service"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"wget https://localhost:5001/api/ProductServices"},{"attributes":{"code-block":true},"insert":"\n\n"},{"insert":"http://52.53.170.129:4000/api/ProductServices"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"\n\n"}]}